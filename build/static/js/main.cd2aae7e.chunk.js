(this["webpackJsonpcalendar-app"]=this["webpackJsonpcalendar-app"]||[]).push([[0],{158:function(e,t,n){},159:function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(0),c=n.n(r),s=n(11),i=n.n(s),o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,168)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},d=n(48),u=n(44),l=n(12),p=n(20),j=n.n(p),f=n(38),b=n(92),h=n(91),v=n(36),x=n.n(v),m=n(76),O=n.n(m),g=(n(111),c.a.createContext()),k=Object(h.b)(x.a),E=function(){var e=Object(r.useContext)(g),t=e.events,n=e.dispatch,c=Object(l.f)(),s=function(e){return Object(b.a)(Object(b.a)({},e),{},{start:x()(e.start).toDate(),end:x()(e.end).toDate()})},i=function(){var e=Object(f.a)(j.a.mark((function e(){var a,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://james-calendar-app-backend.herokuapp.com/events/");case 3:if(!(a=e.sent).ok){e.next=10;break}return e.next=7,a.json();case 7:r=e.sent,c=r.map(s),JSON.stringify(t)!==JSON.stringify(c)&&n({type:"POPULATE_EVENTS",events:c});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){i(),console.log("effect ran")}),[t]),Object(a.jsxs)("main",{className:O.a.grid,children:[Object(a.jsx)("div",{className:O.a.gridItem,children:Object(a.jsx)(u.b,{to:"/event/create",children:"Create"})}),Object(a.jsx)("div",{className:O.a.gridItem,children:Object(a.jsx)(h.a,{localizer:k,events:t,startAccessor:"start",endAccessor:"end",style:{height:500},onSelectEvent:function(e){return t=e.id,void c.push("/event/update/".concat(t));var t}})})]})},N=n(22),_=n.n(N),y=n(90),T=n.n(y),I=(n(114),n(97)),D=Object(I.extendMoment)(x.a),S=function(e){var t=Object(r.useContext)(g),n=t.events,c=t.dispatch,s=Object(l.f)(),i=e.match.params.id,o=!!i,p=Object(r.useState)(""),b=Object(d.a)(p,2),h=b[0],v=b[1],x=Object(r.useState)(""),m=Object(d.a)(x,2),O=m[0],k=m[1],E=Object(r.useState)(""),N=Object(d.a)(E,2),y=N[0],I=N[1];Object(r.useEffect)((function(){o&&J()}),[]);var S=function(){s.push("/")},w=function(){var e=Object(f.a)(j.a.mark((function e(){var t,n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={title:h,start:D(O).utc(),end:D(y).utc()},e.prev=1,e.next=4,fetch("https://james-calendar-app-backend.herokuapp.com/events/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:if(!(n=e.sent).ok){e.next=10;break}return e.next=8,n.json();case 8:a=e.sent,c({type:"ADD_EVENT",id:a.id,title:a.title,start:D(O).toDate(),end:D(y).toDate()});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(f.a)(j.a.mark((function e(){var t,n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:i,title:h,start:O,end:y},e.prev=1,e.next=4,fetch("https://james-calendar-app-backend.herokuapp.com/events/".concat(i,"/"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:if(!(n=e.sent).ok){e.next=10;break}return e.next=8,n.json();case 8:a=e.sent,c({type:"EDIT_EVENT",id:a.id,title:a.title,start:D(a.start).toDate(),end:D(a.end).toDate()});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://james-calendar-app-backend.herokuapp.com/events/".concat(i,"/"),{method:"DELETE",headers:{"Content-Type":"application/json"}});case 3:e.sent.ok&&c({type:"REMOVE_EVENT",id:"".concat(i)}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),V=function(){F()&&(w(),L(),S())},A=function(){F()&&(C(),L(),S())},J=function(){var e=Object(f.a)(j.a.mark((function e(){var t,a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=n.find((function(e){return"".concat(i)==="".concat(e.id)})))){e.next=7;break}v(t.title),k(t.start),I(t.end),e.next=23;break;case 7:return e.prev=7,e.next=10,fetch("https://james-calendar-app-backend.herokuapp.com/events/".concat(i,"/"),{method:"GET",headers:{"Content-Type":"application/json"}});case 10:if(!(a=e.sent).ok){e.next=18;break}return e.next=14,a.json();case 14:r=e.sent,v(r.title),k(D(r.start).toDate()),I(D(r.end).toDate());case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(7),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[7,20]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=new Date;if(e.setHours(0,0,0,0),"object"!==typeof O||"object"!==typeof y)return alert("Not date type."),!1;if(O>y)return alert("Start date later than end date."),!1;if(O<e)return alert("Start before today"),!1;var t=D.range(O,y);return!n.find((function(e,n){if(i!==e.id.toString()){var a=D.range(e.start,e.end);return t.overlaps(a)}return!1}))||(alert("New event overlaps a existing."),!1)},L=function(){v(""),k(""),I("")};return Object(a.jsx)("form",{onSubmit:function(e){e.preventDefault(),o?A():V()},children:Object(a.jsxs)("main",{className:_.a.grid,children:[Object(a.jsx)("div",{className:_.a.gridItem,children:Object(a.jsx)(u.b,{to:"/",children:"Back"})}),Object(a.jsxs)("div",{className:_.a.gridItem,children:[Object(a.jsx)("input",{className:_.a.inlineItem,value:h,onChange:function(e){return v(e.target.value)},placeholder:"Add title"}),Object(a.jsxs)("div",{className:_.a.inline,children:[Object(a.jsx)("div",{className:_.a.inlineItem,children:Object(a.jsx)(T.a,{required:!0,placeholderText:"Add start date",selected:O,showTimeSelect:!0,dateFormat:"Pp",onChange:function(e){return k(e)}})}),Object(a.jsx)("span",{className:_.a.inlineItem,children:"to"}),Object(a.jsx)("div",{className:_.a.inlineItem,children:Object(a.jsx)(T.a,{required:!0,placeholderText:"Add end date",selected:y,showTimeSelect:!0,dateFormat:"Pp",onChange:function(e){return I(e)}})})]})]}),Object(a.jsx)("div",{className:_.a.gridItem,children:Object(a.jsxs)("div",{children:[Object(a.jsx)("button",{className:_.a.inlineItem,children:"Save"}),o&&Object(a.jsx)("button",{className:_.a.inlineItem,type:"button",onClick:function(){P(),L(),S()},children:"Delete"})]})})]})})},w=function(){return Object(a.jsx)("h1",{children:"404 - Not found."})},C=function(){return Object(a.jsx)(u.a,{children:Object(a.jsxs)(l.c,{children:[Object(a.jsx)(l.a,{path:"/",component:E,exact:!0}),Object(a.jsx)(l.a,{path:"/event/create",component:S,exact:!0}),Object(a.jsx)(l.a,{path:"/event/update/:id",component:S,exact:!0}),Object(a.jsx)(l.a,{component:w})]})})},P=(n(158),n(99)),V=function(e,t){var n=null;switch(t.type){case"POPULATE_EVENTS":return t.events;case"ADD_EVENT":return[].concat(Object(P.a)(e),[{id:t.id,title:t.title,start:t.start,end:t.end}]);case"EDIT_EVENT":return-1!==(n=e.indexOf((function(e){return e.id===t.id})))&&(e[n]={id:t.id,title:t.title,start:t.start,end:t.end}),e;case"REMOVE_EVENT":return e.filter((function(e){return t.id!==e.id}));default:return e}},A=function(){var e=Object(r.useReducer)(V,[]),t=Object(d.a)(e,2),n=t[0],c=t[1];return Object(a.jsx)(g.Provider,{value:{events:n,dispatch:c},children:Object(a.jsx)(C,{})})};i.a.render(Object(a.jsx)(A,{}),document.getElementById("root")),o()},22:function(e,t,n){e.exports={grid:"event_grid__in8tj",gridItem:"event_gridItem__2IPf9",inline:"event_inline__1yz1r",inlineItem:"event_inlineItem__1bzhJ",dates:"event_dates__2HMWq"}},76:function(e,t,n){e.exports={grid:"calendar_grid__3uige",gridItem:"calendar_gridItem__1NTjI"}}},[[159,1,2]]]);
//# sourceMappingURL=main.cd2aae7e.chunk.js.map